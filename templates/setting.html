{% extends "topic/base.html" %}
{% block title %}用户设置{% endblock%}
{% block main %}

<div id="main">

    <div id="sidebar">

      <div class="panel">

        <div class="header">
          <span class="col_fade">个人信息 ID: {{ user.id }} </span>
        </div>

        <div class="inner">
          <div class="user_card">
        <div>
        <a class="user_avatar" href=" {{ url_for('topic.user_index', username=user.username) }} ">
          <img src="{{ user.image }}" title="">
        </a>
        <span class="user_name"><a class="dark" href="{{ url_for('topic.user_index', username=user.username) }}">{{ user.username }}</a></span>
        <div class="space clearfix"></div>
        <span class="signature">
            “

                {{ user.signature }}

            ”
        </span>
      </div>
    </div>


        </div>

      </div>


      <div class="panel">
        <div>
          <a href="/topic/new?board_id={{ bid }}" class="create_topic_btn">
            <span class="span-success">发布话题</span>
          </a>
        </div>
      </div>
  
    </div>

    <div id="content">
        <div class="panel">

            <div class="header">
              <ul class="breadcrumb">
                <li><a href="{{ url_for('topic.user_index', username=user.username) }}">主页</a><span class="divider">/</span></li>
                <li class="active">设置</li>
              </ul>
            </div>

            <div class="inner">
            <form id="setting_form" class="form-horizontal" action="{{ url_for('setting.change_username') }}" method="post">

                <div class="control-group">
                    <label class="control-label" for="name">用户名</label>

                      <div class="controls">
                        <input class="input-xlarge readonly" id="name" name="name" size="30" type="text" value="{{ user.username }}" >
                     </div>
                </div>

                <div class="control-group">
                  <label class="control-label" for="signature">个性签名</label>

                    <div class="controls">
                    <textarea class="input-xlarge" id="signature" name="signature" size="30" style="resize: none;">{{ user.signature }}</textarea>
                    </div>
                </div>

                <div>
                    <input type="hidden" id="action" name="action" value="change_setting">
                    <input type="hidden" name="_csrf" value="uN0Ys9WU-ErZG8cTca4fp83d-OIXVh78sOs8">

                    <div class="form-actions">
                      <input type="submit" class="span-primary submit_btn" data-loading-text="保存中.." value="保存设置">
                    </div>
                </div>

            </form>
        </div>

            <div class="panel">
                <div class="header">
                  <span class="col_fade">更改密码</span>
                </div>
                <div class="inner">
              <form id="change_pass_form" class="form-horizontal" action="{{ url_for('setting.change_password') }}" method="post">
                <div class="control-group">
                  <label class="control-label" for="old_pass">当前密码</label>

                  <div class="controls">
        {#              background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"#}
                    <input class="input-xlarge" type="password" id="old_pass" name="old_pass" size="30" autocomplete="off"  >
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="new_pass">新密码</label>

                  <div class="controls">
                    <input class="input-xlarge" type="password" id="new_pass" name="new_pass" size="30">
                  </div>
                </div>
                <input type="hidden" id="action" name="action" value="change_password">
                <input type="hidden" name="_csrf" value="uN0Ys9WU-ErZG8cTca4fp83d-OIXVh78sOs8">

                <div class="form-actions">
                  <input type="submit" class="span-primary submit_btn" data-loading-text="更改中.." value="更改密码">
                </div>
              </form>
            </div>
            </div>

            <div class="panel">
                <div class="header">
                  <span class="col_fade">更改头像</span>
                </div>
                <div class="inner">
            <form method="post"
                  action="{{ url_for('setting.change_image')}}"
                  enctype="multipart/form-data"

            >
                <div>
                    <label style="display: inline" >请选择图片文件上传，即可更改头像。</label>
                    <input type="file"  name="avatar">
                    <button type="submit" class="span-primary submit_btn" data-loading-text="上传中..">上传头像</button>
                </div>
            </form>

          </form>

        </div>
            </div>
      </div>
    </div>

</div>

{% endblock %}
